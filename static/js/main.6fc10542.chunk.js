(this.webpackJsonpmovie=this.webpackJsonpmovie||[]).push([[0],{17:function(e,t,n){e.exports={content:"Content_content__2m6Ls",container:"Content_container__1DSdq"}},28:function(e,t,n){e.exports={search:"Search_search__2OMsh"}},3:function(e,t,n){e.exports={movie:"Movie_movie__dMeeA",coverInner:"Movie_coverInner__39sRh",movieCover:"Movie_movieCover__1X-i_",coverDarkened:"Movie_coverDarkened__1F6uK",info:"Movie_info__1BQB0",title:"Movie_title__2ivvv",category:"Movie_category__jrtZk",average:"Movie_average__3uygu"}},39:function(e,t,n){},4:function(e,t,n){e.exports={modal:"Modal_modal__3nOwP",delete:"Modal_delete__3sO1S",active:"Modal_active__1lwuK",modalContent:"Modal_modalContent__1n1mY",movieInfo:"Modal_movieInfo__qn4pj",movieInfoNone:"Modal_movieInfoNone__3XQoI",img:"Modal_img__2Pfi2",imgNone:"Modal_imgNone__3i6SJ",info:"Modal_info__1XHEp",infoNone:"Modal_infoNone__lOb4D",description:"Modal_description__lehUI"}},40:function(e,t,n){},6:function(e,t,n){e.exports={header:"Header_header__eipLj",container:"Header_container__3iKJf",logo:"Header_logo__1mWE2",icon:"Header_icon__2CX6f",logoText:"Header_logoText__1n7Qw",search:"Header_search__qdNka"}},65:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(10),c=n.n(i),r=(n(39),n(40),n(6)),s=n.n(r),l=n(28),d=n.n(l),u=n(0),v=function(e){return Object(u.jsx)("form",{className:d.a.search,children:Object(u.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})})},m=function(e){return Object(u.jsx)("div",{className:s.a.header,children:Object(u.jsxs)("div",{className:s.a.container,children:[Object(u.jsxs)("div",{className:s.a.logo,children:[Object(u.jsx)("div",{className:s.a.icon}),Object(u.jsx)("div",{className:s.a.logoText,children:"MOVIE"})]}),Object(u.jsx)("div",{className:s.a.search,children:Object(u.jsx)(v,{})})]})})},p=n(5),j=n(29),h=n(30),f=n(34),b=n(32),_=n(17),g=n.n(_),O=n(33),x=n(3),M=n.n(x),w=function(e){var t=o.a.useState(),n=Object(O.a)(t,2),a=n[0],i=n[1];o.a.useEffect((function(){e.rating<=5?i("red"):e.rating>5&&e.rating<7?i("orange"):i("green")}),[e.rating]);return Object(u.jsxs)("div",{className:M.a.movie,children:[Object(u.jsxs)("div",{className:M.a.coverInner,children:[Object(u.jsx)("img",{className:M.a.movieCover,src:e.posterUrl}),Object(u.jsx)("div",{onClick:function(){e.setActive(!0),e.getMovieModal(e.filmId)},className:M.a.coverDarkened})]}),Object(u.jsxs)("div",{className:M.a.info,children:[Object(u.jsxs)("div",{className:M.a.title,children:[" ",e.name]}),Object(u.jsx)("div",{className:M.a.category,children:e.genres.map((function(e){return e.genre})).join()}),Object(u.jsx)("div",{style:{borderColor:a},className:M.a.average,children:e.rating})]})]})},y=n(9),N=n(8),C=n.n(N),k=n(18),I=n(13),P=n.n(I),A="128d4a2b-b5a5-48b6-beeb-bdfb70407d2c",E=function(e){return P.a.get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS&page=".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":A}})},L=function(e){return P.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":A}})},S=function(e){return P.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e,"/videos"),{headers:{"Content-Type":"application/json","X-API-KEY":A}})},T="SET_MOVIE",H="SET_MODAL",D=function(e,t,n){return{type:T,movie:e,count:t,clb:n}},X=function(e,t){return{type:H,modal:e,trailers:t}},F={movie:[],trailers:[],modal:null,totalCount:null,currentPage:1},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return t.clb&&t.clb(),Object(p.a)(Object(p.a)({},e),{},{movie:Object(y.a)(new Set([].concat(Object(y.a)(e.movie),Object(y.a)(t.movie)))),totalCount:t.count,currentPage:e.currentPage+1});case H:return Object(p.a)(Object(p.a)({},e),{},{modal:t.modal,trailers:Object(y.a)(t.trailers?t.trailers.map((function(e){return e.url})).filter((function(e){return e.includes("https://www.youtube.com/watch?v=")||e.includes("https://youtu.be/")})).map((function(e){return e.includes("https://www.youtube.com/watch?v=")?e.replace("https://www.youtube.com/watch?v=","https://www.youtube.com/embed/"):e.replace("https://youtu.be/","https://www.youtube.com/embed/")})):[])});default:return e}},K=n(12),Y=n(4),B=n.n(Y),J=function(e){var t=e.genres?e.genres.map((function(e){return e.genre})).join(" "):"";return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{onClick:function(){e.setActive(!1),e.setModal(null)},className:"".concat(B.a.modal,"\n    ").concat(e.active?B.a.active:""),children:[Object(u.jsx)("div",{onclick:function(){e.setActive(!1),e.setModal(null)},className:B.a.delete,children:"X"}),Object(u.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:B.a.modalContent,children:[Object(u.jsxs)("div",{className:B.a.movieInfo,children:[Object(u.jsx)("img",{src:e.posterUrlPreview,className:B.a.img}),Object(u.jsxs)("div",{className:B.a.info,children:[Object(u.jsx)("h2",{children:e.nameRu}),Object(u.jsx)("div",{children:Object(u.jsx)("i",{children:e.slogan})}),Object(u.jsxs)("div",{children:[" ",Object(u.jsx)("span",{children:"\u0416\u0430\u043d\u0440 : "}),t]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{children:"\u0413\u043e\u0434 : "}),e.year]})]})]}),Object(u.jsx)("div",{className:B.a.description,children:e.description}),Object(u.jsx)("iframe",{src:e.trailers[0],title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,seamless:!0})]})]})})},R=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={active:!1,getMovie:!0,isLoad:!0},e.setActive=function(t){e.setState({active:t})},e.scrollHandler=function(t){t.target.documentElement.scrollHeight-(t.target.documentElement.scrollTop+window.innerHeight)<200&&e.props.currentPage<e.props.totalCount&&!e.state.isLoad&&!e.state.getMovie&&e.setState({getMovie:!0,isLoad:!0},(function(){e.getMovie()}))},e.list=function(){return e.props.movie.map((function(t){return Object(u.jsx)(w,{getMovieModal:e.props.getMovieModal,filmId:t.filmId,active:e.active,setActive:e.setActive,name:t.nameRu,rating:t.rating,genres:t.genres,posterUrl:t.posterUrl},t.filmId)}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.scrollHandler),this.getMovie()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.scrollHandler)}},{key:"getMovie",value:function(){var e=this;this.state.isLoad&&this.state.getMovie&&(this.setState({isLoad:!0}),this.props.getMovie(this.props.currentPage,this.props.movie,(function(){e.setState({getMovie:!1,isLoad:!1})})))}},{key:"render",value:function(){return console.log(this.props.trailers),Object(u.jsx)("div",{className:g.a.content,children:Object(u.jsxs)("div",{className:g.a.container,children:[this.state.active&&Object(u.jsx)(J,Object(p.a)(Object(p.a)({},this.props.modal),{},{trailers:this.props.trailers,setModal:this.props.setModal,active:this.state.active,setActive:this.setActive})),this.list()]})})}}]),n}(o.a.Component),q=Object(K.b)((function(e){return{movie:e.movie.movie,modal:e.movie.modal,trailers:e.movie.trailers,totalCount:e.movie.totalCount,currentPage:e.movie.currentPage}}),{getMovie:function(e,t,n){return function(){var a=Object(k.a)(C.a.mark((function a(o){var i;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.length<=20*e)){a.next=5;break}return a.next=3,E(e);case 3:i=a.sent,o(D(i.data.films,i.data.pagesCount,n));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},getMovieModal:function(e){return function(){var t=Object(k.a)(C.a.mark((function t(n){var a,o;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(e);case 2:return a=t.sent,t.next=5,L(e);case 5:o=t.sent,n(X(null)),n(X(o.data.data,a.data.trailers));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setModal:X})(R);var Q=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(m,{}),Object(u.jsx)(q,{})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),i(e),c(e)}))},W=n(14),Z=n(31),z=Object(W.b)({movie:U}),G=Object(W.c)(z,Object(W.a)(Z.a));c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(K.a,{store:G,children:Object(u.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[65,1,2]]]);
//# sourceMappingURL=main.6fc10542.chunk.js.map