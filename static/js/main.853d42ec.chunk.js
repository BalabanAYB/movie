(this.webpackJsonpmovie=this.webpackJsonpmovie||[]).push([[0],{17:function(e,t,a){e.exports={content:"Content_content__2m6Ls",container:"Content_container__1DSdq",error:"Content_error__3i2fM"}},30:function(e,t,a){e.exports={search:"Search_search__2OMsh"}},4:function(e,t,a){e.exports={loader:"Preloader_loader__UB95n",loaderInner:"Preloader_loaderInner__1y1Sg",loaderLineWrap:"Preloader_loaderLineWrap__1vEzx",spin:"Preloader_spin__3X5r_",loaderLine:"Preloader_loaderLine__1ewUs"}},40:function(e,t,a){},41:function(e,t,a){},5:function(e,t,a){e.exports={modal:"Modal_modal__3nOwP",delete:"Modal_delete__3sO1S",active:"Modal_active__1lwuK",modalContent:"Modal_modalContent__1n1mY",eff:"Modal_eff__28qb5",movieInfo:"Modal_movieInfo__qn4pj",movieInfoNone:"Modal_movieInfoNone__3XQoI",img:"Modal_img__2Pfi2",imgNone:"Modal_imgNone__3i6SJ",info:"Modal_info__1XHEp",infoNone:"Modal_infoNone__lOb4D",description:"Modal_description__lehUI"}},6:function(e,t,a){e.exports={movie:"Movie_movie__dMeeA",coverInner:"Movie_coverInner__39sRh",movieCover:"Movie_movieCover__1X-i_",coverDarkened:"Movie_coverDarkened__1F6uK",info:"Movie_info__1BQB0",title:"Movie_title__2ivvv",category:"Movie_category__jrtZk",average:"Movie_average__3uygu"}},66:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(13),i=a.n(o),c=(a(40),a(41),a(7)),s=a.n(c),l=a(30),d=a.n(l),u=a(9),v=a(10),p=a(2),j=a(8),m=a.n(j),h=a(16),f=a(12),b=a.n(f),_="128d4a2b-b5a5-48b6-beeb-bdfb70407d2c",O=function(e){return b.a.get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS&page=".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},g=function(e){return b.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},x=function(e){return b.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e,"/videos"),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},M=function(e){return b.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword=".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},N="SET_MOVIE",y="SET_MODAL",w="SET_CURRENTPAGE",C="SEARCH",E="SEARCH_ERROR",k=function(e,t,a){return{type:N,movie:e,count:t,clb:a}},L=function(e,t){return{type:y,modal:e,trailers:t}},P=function(e){return{type:C,movie:e}},I=function(e){return{type:E,text:e}},A={movie:[],trailers:null,search:!1,modal:null,totalCount:null,currentPage:1,searchError:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return t.clb&&t.clb(),Object(p.a)(Object(p.a)({},e),{},{movie:Object(v.a)(new Set([].concat(Object(v.a)(e.movie),Object(v.a)(t.movie)))),totalCount:t.count,currentPage:e.currentPage+1});case C:return Object(p.a)(Object(p.a)({},e),{},{movie:Object(v.a)(t.movie),search:!!t.movie.length});case E:return Object(p.a)(Object(p.a)({},e),{},{movie:[],searchError:t.text});case w:return Object(p.a)(Object(p.a)({},e),{},{currentPage:1});case y:return Object(p.a)(Object(p.a)({},e),{},{modal:t.modal,trailers:Object(v.a)(t.trailers?t.trailers.map((function(e){return e.url})).filter((function(e){return e.includes("https://www.youtube.com/watch?v=")||e.includes("https://youtu.be/")})).map((function(e){return e.includes("https://www.youtube.com/watch?v=")?e.replace("https://www.youtube.com/watch?v=","https://www.youtube.com/embed/"):e.replace("https://youtu.be/","https://www.youtube.com/embed/")})):[])});default:return e}},T=a(0),H=Object(u.b)((function(e){return{}}),{search:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:(n=t.sent).data.films.length?(a(P(n.data.films)),console.log(n.data.films)):(a(I(n.data.keyword)),a(P(n.data.films)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(T.jsx)("form",{className:d.a.search,children:Object(T.jsx)("input",{onChange:function(t){e.search(t.target.value)},type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})})})),R=function(e){return Object(T.jsx)("div",{className:s.a.header,children:Object(T.jsxs)("div",{className:s.a.container,children:[Object(T.jsxs)("div",{className:s.a.logo,children:[Object(T.jsx)("div",{className:s.a.icon}),Object(T.jsx)("div",{className:s.a.logoText,children:"MOVIE"})]}),Object(T.jsx)("div",{className:s.a.search,children:Object(T.jsx)(H,{})})]})})},U=a(31),X=a(32),D=a(35),W=a(34),F=a(17),K=a.n(F),Y=a(15),B=a(6),q=a.n(B),J=function(e){var t=r.a.useState(),a=Object(Y.a)(t,2),n=a[0],o=a[1];r.a.useEffect((function(){e.rating<=5?o("red"):e.rating>5&&e.rating<7?o("orange"):o("green")}),[e.rating]);return Object(T.jsxs)("div",{className:q.a.movie,children:[Object(T.jsxs)("div",{className:q.a.coverInner,children:[Object(T.jsx)("img",{className:q.a.movieCover,src:e.posterUrl}),Object(T.jsx)("div",{onClick:function(){e.setActive(!0),e.getMovieModal(e.filmId)},className:q.a.coverDarkened})]}),Object(T.jsxs)("div",{className:q.a.info,children:[Object(T.jsxs)("div",{className:q.a.title,children:[" ",e.name]}),Object(T.jsx)("div",{className:q.a.category,children:e.genres.map((function(e){return e.genre})).join()}),Object(T.jsx)("div",{style:{borderColor:n},className:q.a.average,children:e.rating})]})]})},Q=a(4),V=a.n(Q),z=function(){return Object(T.jsx)("div",{className:V.a.loader,children:Object(T.jsxs)("div",{className:V.a.loaderInner,children:[Object(T.jsx)("div",{className:V.a.loaderLineWrap,children:Object(T.jsx)("div",{className:V.a.loaderLine})}),Object(T.jsx)("div",{className:V.a.loaderLineWrap,children:Object(T.jsx)("div",{className:V.a.loaderLine})}),Object(T.jsx)("div",{className:V.a.loaderLineWrap,children:Object(T.jsx)("div",{className:V.a.loaderLine})}),Object(T.jsx)("div",{className:V.a.loaderLineWrap,children:Object(T.jsx)("div",{className:V.a.loaderLine})}),Object(T.jsx)("div",{className:V.a.loaderLineWrap,children:Object(T.jsx)("div",{className:V.a.loaderLine})})]})})},G=a(5),Z=a.n(G),$=function(e){var t=e.genres?e.genres.map((function(e){return e.genre})).join(" "):"",a=r.a.useState(!0),n=Object(Y.a)(a,2),o=n[0],i=n[1];return r.a.useEffect((function(){e.filmId&&e.trailers?i(!1):i(!0)}),[e]),Object(T.jsx)(T.Fragment,{children:o?Object(T.jsx)("div",{onClick:function(){e.setActive(!1),e.setModal(null)},className:"".concat(Z.a.modal),children:Object(T.jsx)(z,{})}):Object(T.jsxs)("div",{onClick:function(){e.setActive(!1),e.setModal(null)},className:"".concat(Z.a.modal,"\n    ").concat(o?"":Z.a.active),children:[Object(T.jsx)("div",{onclick:function(){e.setActive(!1),e.setModal(null)},className:Z.a.delete,children:"X"}),Object(T.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:Z.a.modalContent,children:[Object(T.jsxs)("div",{className:Z.a.movieInfo,children:[Object(T.jsx)("img",{src:e.posterUrlPreview,className:Z.a.img}),Object(T.jsxs)("div",{className:Z.a.info,children:[Object(T.jsx)("h2",{children:e.nameRu}),Object(T.jsx)("div",{children:Object(T.jsx)("i",{children:e.slogan})}),Object(T.jsxs)("div",{children:[" ",Object(T.jsx)("span",{children:"\u0416\u0430\u043d\u0440 : "}),t]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{children:"\u0413\u043e\u0434 : "}),e.year]})]})]}),Object(T.jsx)("div",{className:Z.a.description,children:e.description}),Object(T.jsx)("iframe",{src:e.trailers[0],title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,seamless:!0})]})]})})},ee=function(e){Object(D.a)(a,e);var t=Object(W.a)(a);function a(){var e;Object(U.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={active:!1,getMovie:!0,isLoad:!0},e.setActive=function(t){e.setState({active:t})},e.scrollHandler=function(t){t.target.documentElement.scrollHeight-(t.target.documentElement.scrollTop+window.innerHeight)<200&&e.props.currentPage<e.props.totalCount&&!e.state.isLoad&&!e.state.getMovie&&!e.props.search&&e.setState({getMovie:!0,isLoad:!0},(function(){e.getMovie()}))},e.list=function(){return e.props.movie.map((function(t){return Object(T.jsx)(J,{getMovieModal:e.props.getMovieModal,filmId:t.filmId,active:e.active,setActive:e.setActive,name:t.nameRu,rating:t.rating,genres:t.genres,posterUrl:t.posterUrl},t.filmId)}))},e}return Object(X.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.scrollHandler),this.getMovie()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.scrollHandler)}},{key:"componentDidUpdate",value:function(e){var t=this;(e.search&&!this.props.search||e.searchError&&!this.props.searchError)&&(this.props.setCurrentPage(),this.setState({getMovie:!0,isLoad:!0},(function(){t.getMovie()})))}},{key:"getMovie",value:function(){var e=this;this.state.isLoad&&this.state.getMovie&&(this.setState({isLoad:!0}),this.props.getMovie(this.props.currentPage,this.props.movie,(function(){e.setState({getMovie:!1,isLoad:!1})})))}},{key:"render",value:function(){return Object(T.jsxs)("div",{className:K.a.content,children:[Object(T.jsxs)("div",{className:K.a.container,children:[this.state.active&&Object(T.jsx)($,Object(p.a)(Object(p.a)({},this.props.modal),{},{trailers:this.props.trailers,setModal:this.props.setModal,active:this.state.active,setActive:this.setActive})),this.list()]}),this.props.getMovie&&!this.props.searchError&&!this.props.search&&this.props.totalCount!==this.props.currentPage&&Object(T.jsx)(z,{}),this.props.searchError&&Object(T.jsxs)("div",{className:K.a.error,children:['\u0444\u0438\u043b\u044c\u043c\u044b "',this.props.searchError,'" \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b']})]})}}]),a}(r.a.Component),te=Object(u.b)((function(e){return{movie:e.movie.movie,search:e.movie.search,searchError:e.movie.searchError,modal:e.movie.modal,trailers:e.movie.trailers,totalCount:e.movie.totalCount,currentPage:e.movie.currentPage}}),{getMovie:function(e,t,a){return function(){var n=Object(h.a)(m.a.mark((function n(r){var o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.length<=20*e)){n.next=5;break}return n.next=3,O(e);case 3:o=n.sent,r(k(o.data.films,o.data.pagesCount,a));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getMovieModal:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(a){var n,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:return n=t.sent,t.next=5,g(e);case 5:r=t.sent,a(L(null)),a(L(r.data.data,n.data.trailers));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setModal:L,setCurrentPage:function(){return{type:w}}})(ee);var ae=function(){return Object(T.jsxs)("div",{className:"App",children:[Object(T.jsx)(R,{}),Object(T.jsx)(te,{})]})},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,67)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),o(e),i(e)}))},re=a(18),oe=a(33),ie=Object(re.b)({movie:S}),ce=Object(re.c)(ie,Object(re.a)(oe.a));i.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(u.a,{store:ce,children:Object(T.jsx)(ae,{})})}),document.getElementById("root")),ne()},7:function(e,t,a){e.exports={header:"Header_header__eipLj",container:"Header_container__3iKJf",logo:"Header_logo__1mWE2",icon:"Header_icon__2CX6f",logoText:"Header_logoText__1n7Qw",search:"Header_search__qdNka"}}},[[66,1,2]]]);
//# sourceMappingURL=main.853d42ec.chunk.js.map