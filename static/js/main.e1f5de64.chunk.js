(this.webpackJsonpmovie=this.webpackJsonpmovie||[]).push([[0],{20:function(e,t,n){e.exports={content:"Content_content__2m6Ls",container:"Content_container__1DSdq"}},29:function(e,t,n){e.exports={search:"Search_search__2OMsh"}},3:function(e,t,n){e.exports={loader:"Preloader_loader__UB95n",loaderInner:"Preloader_loaderInner__1y1Sg",loaderLineWrap:"Preloader_loaderLineWrap__1vEzx",spin:"Preloader_spin__3X5r_",loaderLine:"Preloader_loaderLine__1ewUs"}},40:function(e,t,n){},41:function(e,t,n){},5:function(e,t,n){e.exports={movie:"Movie_movie__dMeeA",coverInner:"Movie_coverInner__39sRh",movieCover:"Movie_movieCover__1X-i_",coverDarkened:"Movie_coverDarkened__1F6uK",info:"Movie_info__1BQB0",title:"Movie_title__2ivvv",category:"Movie_category__jrtZk",average:"Movie_average__3uygu"}},6:function(e,t,n){e.exports={modal:"Modal_modal__3nOwP",delete:"Modal_delete__3sO1S",active:"Modal_active__1lwuK",modalContent:"Modal_modalContent__1n1mY",movieInfo:"Modal_movieInfo__qn4pj",movieInfoNone:"Modal_movieInfoNone__3XQoI",img:"Modal_img__2Pfi2",imgNone:"Modal_imgNone__3i6SJ",info:"Modal_info__1XHEp",infoNone:"Modal_infoNone__lOb4D",description:"Modal_description__lehUI"}},66:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(13),o=n.n(i),c=(n(40),n(41),n(7)),s=n.n(c),l=n(29),d=n.n(l),u=n(9),v=n(10),j=n(4),p=n(8),m=n.n(p),h=n(15),b=n(12),f=n.n(b),_="128d4a2b-b5a5-48b6-beeb-bdfb70407d2c",O=function(e){return f.a.get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS&page=".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},g=function(e){return f.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},x=function(e){return f.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e,"/videos"),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},M=function(e){return f.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword=".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":_}})},N="SET_MOVIE",y="SET_MODAL",w="SET_CURRENTPAGE",C="SEARCH",k=function(e,t,n){return{type:N,movie:e,count:t,clb:n}},L=function(e,t){return{type:y,modal:e,trailers:t}},P={movie:[],trailers:[],search:!1,modal:null,totalCount:null,currentPage:1},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return t.clb&&t.clb(),Object(j.a)(Object(j.a)({},e),{},{movie:Object(v.a)(new Set([].concat(Object(v.a)(e.movie),Object(v.a)(t.movie)))),totalCount:t.count,currentPage:e.currentPage+1});case C:return Object(j.a)(Object(j.a)({},e),{},{movie:Object(v.a)(t.movie),search:!!t.movie.length});case w:return Object(j.a)(Object(j.a)({},e),{},{currentPage:1});case y:return Object(j.a)(Object(j.a)({},e),{},{modal:t.modal,trailers:Object(v.a)(t.trailers?t.trailers.map((function(e){return e.url})).filter((function(e){return e.includes("https://www.youtube.com/watch?v=")||e.includes("https://youtu.be/")})).map((function(e){return e.includes("https://www.youtube.com/watch?v=")?e.replace("https://www.youtube.com/watch?v=","https://www.youtube.com/embed/"):e.replace("https://youtu.be/","https://www.youtube.com/embed/")})):[])});default:return e}},E=n(0),A=Object(u.b)((function(e){return{}}),{search:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:a=t.sent,n((r=a.data.films,{type:C,movie:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){return Object(E.jsx)("form",{className:d.a.search,children:Object(E.jsx)("input",{onChange:function(t){e.search(t.target.value)},type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a..."})})})),S=function(e){return Object(E.jsx)("div",{className:s.a.header,children:Object(E.jsxs)("div",{className:s.a.container,children:[Object(E.jsxs)("div",{className:s.a.logo,children:[Object(E.jsx)("div",{className:s.a.icon}),Object(E.jsx)("div",{className:s.a.logoText,children:"MOVIE"})]}),Object(E.jsx)("div",{className:s.a.search,children:Object(E.jsx)(A,{})})]})})},T=n(30),H=n(31),U=n(35),X=n(33),D=n(20),W=n.n(D),F=n(34),K=n(5),R=n.n(K),Y=function(e){var t=r.a.useState(),n=Object(F.a)(t,2),a=n[0],i=n[1];r.a.useEffect((function(){e.rating<=5?i("red"):e.rating>5&&e.rating<7?i("orange"):i("green")}),[e.rating]);return Object(E.jsxs)("div",{className:R.a.movie,children:[Object(E.jsxs)("div",{className:R.a.coverInner,children:[Object(E.jsx)("img",{className:R.a.movieCover,src:e.posterUrl}),Object(E.jsx)("div",{onClick:function(){e.setActive(!0),e.getMovieModal(e.filmId)},className:R.a.coverDarkened})]}),Object(E.jsxs)("div",{className:R.a.info,children:[Object(E.jsxs)("div",{className:R.a.title,children:[" ",e.name]}),Object(E.jsx)("div",{className:R.a.category,children:e.genres.map((function(e){return e.genre})).join()}),Object(E.jsx)("div",{style:{borderColor:a},className:R.a.average,children:e.rating})]})]})},B=n(6),J=n.n(B),q=function(e){var t=e.genres?e.genres.map((function(e){return e.genre})).join(" "):"";return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{onClick:function(){e.setActive(!1),e.setModal(null)},className:"".concat(J.a.modal,"\n    ").concat(e.active?J.a.active:""),children:[Object(E.jsx)("div",{onclick:function(){e.setActive(!1),e.setModal(null)},className:J.a.delete,children:"X"}),Object(E.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:J.a.modalContent,children:[Object(E.jsxs)("div",{className:J.a.movieInfo,children:[Object(E.jsx)("img",{src:e.posterUrlPreview,className:J.a.img}),Object(E.jsxs)("div",{className:J.a.info,children:[Object(E.jsx)("h2",{children:e.nameRu}),Object(E.jsx)("div",{children:Object(E.jsx)("i",{children:e.slogan})}),Object(E.jsxs)("div",{children:[" ",Object(E.jsx)("span",{children:"\u0416\u0430\u043d\u0440 : "}),t]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("span",{children:"\u0413\u043e\u0434 : "}),e.year]})]})]}),Object(E.jsx)("div",{className:J.a.description,children:e.description}),Object(E.jsx)("iframe",{src:e.trailers[0],title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,seamless:!0})]})]})})},Q=n(3),V=n.n(Q),z=function(){return Object(E.jsx)("div",{className:V.a.loader,children:Object(E.jsxs)("div",{className:V.a.loaderInner,children:[Object(E.jsx)("div",{className:V.a.loaderLineWrap,children:Object(E.jsx)("div",{className:V.a.loaderLine})}),Object(E.jsx)("div",{className:V.a.loaderLineWrap,children:Object(E.jsx)("div",{className:V.a.loaderLine})}),Object(E.jsx)("div",{className:V.a.loaderLineWrap,children:Object(E.jsx)("div",{className:V.a.loaderLine})}),Object(E.jsx)("div",{className:V.a.loaderLineWrap,children:Object(E.jsx)("div",{className:V.a.loaderLine})}),Object(E.jsx)("div",{className:V.a.loaderLineWrap,children:Object(E.jsx)("div",{className:V.a.loaderLine})})]})})},G=function(e){Object(U.a)(n,e);var t=Object(X.a)(n);function n(){var e;Object(T.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={active:!1,getMovie:!0,isLoad:!0},e.setActive=function(t){e.setState({active:t})},e.scrollHandler=function(t){t.target.documentElement.scrollHeight-(t.target.documentElement.scrollTop+window.innerHeight)<200&&e.props.currentPage<e.props.totalCount&&!e.state.isLoad&&!e.state.getMovie&&!e.props.search&&e.setState({getMovie:!0,isLoad:!0},(function(){e.getMovie()}))},e.list=function(){return e.props.movie.map((function(t){return Object(E.jsx)(Y,{getMovieModal:e.props.getMovieModal,filmId:t.filmId,active:e.active,setActive:e.setActive,name:t.nameRu,rating:t.rating,genres:t.genres,posterUrl:t.posterUrl},t.filmId)}))},e}return Object(H.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.scrollHandler),this.getMovie()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.scrollHandler)}},{key:"componentDidUpdate",value:function(e){var t=this;e.search&&!this.props.search&&(this.props.setCurrentPage(),this.setState({getMovie:!0,isLoad:!0},(function(){t.getMovie()})))}},{key:"getMovie",value:function(){var e=this;this.state.isLoad&&this.state.getMovie&&(this.setState({isLoad:!0}),this.props.getMovie(this.props.currentPage,this.props.movie,(function(){e.setState({getMovie:!1,isLoad:!1})})))}},{key:"render",value:function(){return Object(E.jsxs)("div",{className:W.a.content,children:[Object(E.jsxs)("div",{className:W.a.container,children:[this.state.active&&Object(E.jsx)(q,Object(j.a)(Object(j.a)({},this.props.modal),{},{trailers:this.props.trailers,setModal:this.props.setModal,active:this.state.active,setActive:this.setActive})),this.list()]}),this.props.getMovie&&Object(E.jsx)(z,{})]})}}]),n}(r.a.Component),Z=Object(u.b)((function(e){return{movie:e.movie.movie,search:e.movie.search,modal:e.movie.modal,trailers:e.movie.trailers,totalCount:e.movie.totalCount,currentPage:e.movie.currentPage}}),{getMovie:function(e,t,n){return function(){var a=Object(h.a)(m.a.mark((function a(r){var i;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.length<=20*e)){a.next=5;break}return a.next=3,O(e);case 3:i=a.sent,r(k(i.data.films,i.data.pagesCount,n));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},getMovieModal:function(e){return function(){var t=Object(h.a)(m.a.mark((function t(n){var a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:return a=t.sent,t.next=5,g(e);case 5:r=t.sent,n(L(null)),n(L(r.data.data,a.data.trailers));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setModal:L,setCurrentPage:function(){return{type:w}}})(G);var $=function(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)(S,{}),Object(E.jsx)(Z,{})]})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))},te=n(16),ne=n(32),ae=Object(te.b)({movie:I}),re=Object(te.c)(ae,Object(te.a)(ne.a));o.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(u.a,{store:re,children:Object(E.jsx)($,{})})}),document.getElementById("root")),ee()},7:function(e,t,n){e.exports={header:"Header_header__eipLj",container:"Header_container__3iKJf",logo:"Header_logo__1mWE2",icon:"Header_icon__2CX6f",logoText:"Header_logoText__1n7Qw",search:"Header_search__qdNka"}}},[[66,1,2]]]);
//# sourceMappingURL=main.e1f5de64.chunk.js.map