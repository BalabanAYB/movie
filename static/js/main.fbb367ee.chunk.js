(this.webpackJsonpmovie=this.webpackJsonpmovie||[]).push([[0],{15:function(e,t,n){e.exports={content:"Content_content__2m6Ls",container:"Content_container__1DSdq"}},26:function(e,t,n){e.exports={search:"Search_search__2OMsh"}},36:function(e,t,n){},37:function(e,t,n){},4:function(e,t,n){e.exports={movie:"Movie_movie__dMeeA",coverInner:"Movie_coverInner__39sRh",movieCover:"Movie_movieCover__1X-i_",coverDarkened:"Movie_coverDarkened__1F6uK",info:"Movie_info__1BQB0",title:"Movie_title__2ivvv",category:"Movie_category__jrtZk",average:"Movie_average__3uygu"}},5:function(e,t,n){e.exports={modal:"Modal_modal__3nOwP",active:"Modal_active__1lwuK",modalContent:"Modal_modalContent__1n1mY",movieInfo:"Modal_movieInfo__qn4pj",movieInfoNone:"Modal_movieInfoNone__3XQoI",img:"Modal_img__2Pfi2",imgNone:"Modal_imgNone__3i6SJ",info:"Modal_info__1XHEp",infoNone:"Modal_infoNone__lOb4D",description:"Modal_description__lehUI"}},6:function(e,t,n){e.exports={header:"Header_header__eipLj",container:"Header_container__3iKJf",logo:"Header_logo__1mWE2",icon:"Header_icon__2CX6f",logoText:"Header_logoText__1n7Qw",search:"Header_search__qdNka"}},62:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(9),c=n.n(i),r=(n(36),n(37),n(6)),s=n.n(r),l=n(26),u=n.n(l),d=n(0),v=function(e){return Object(d.jsx)("form",{className:u.a.search,children:Object(d.jsx)("input",{type:"text",placeholder:"search..."})})},m=function(e){return Object(d.jsx)("div",{className:s.a.header,children:Object(d.jsxs)("div",{className:s.a.container,children:[Object(d.jsxs)("div",{className:s.a.logo,children:[Object(d.jsx)("div",{className:s.a.icon}),Object(d.jsx)("div",{className:s.a.logoText,children:"MOVIE"})]}),Object(d.jsx)("div",{className:s.a.search,children:Object(d.jsx)(v,{})})]})})},p=n(3),j=n(27),h=n(28),f=n(31),b=n(30),_=n(15),g=n.n(_),O=n(4),x=n.n(O),M=function(e){return Object(d.jsxs)("div",{className:x.a.movie,children:[Object(d.jsxs)("div",{className:x.a.coverInner,children:[Object(d.jsx)("img",{className:x.a.movieCover,src:e.posterUrl}),Object(d.jsx)("div",{onClick:function(){e.setActive(!0),e.getMovieModal(e.filmId)},className:x.a.coverDarkened})]}),Object(d.jsxs)("div",{className:x.a.info,children:[Object(d.jsxs)("div",{className:x.a.title,children:[" ",e.name]}),Object(d.jsx)("div",{className:x.a.category,children:e.genres.map((function(e){return e.genre})).join()}),Object(d.jsx)("div",{className:x.a.average,children:e.rating})]})]})},w=n(8),y=n(7),N=n.n(y),C=n(16),k=n(11),I=n.n(k),P="128d4a2b-b5a5-48b6-beeb-bdfb70407d2c",A=function(e){return I.a.get("https://kinopoiskapiunofficial.tech/api/v2.2/films/top?type=TOP_100_POPULAR_FILMS&page=".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":P}})},E=function(e){return I.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e),{headers:{"Content-Type":"application/json","X-API-KEY":P}})},L=function(e){return I.a.get("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(e,"/videos"),{headers:{"Content-Type":"application/json","X-API-KEY":P}})},S="SET_MOVIE",T="SET_MODAL",H="SET_TRAILERS",D=function(e,t,n){return{type:S,movie:e,count:t,clb:n}},F=function(e){return{type:T,modal:e}},U={movie:[],trailers:[],modal:null,totalCount:null,currentPage:1},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return t.clb&&t.clb(),Object(p.a)(Object(p.a)({},e),{},{movie:Object(w.a)(new Set([].concat(Object(w.a)(e.movie),Object(w.a)(t.movie)))),totalCount:t.count,currentPage:e.currentPage+1});case T:return Object(p.a)(Object(p.a)({},e),{},{modal:t.modal});case H:return Object(p.a)(Object(p.a)({},e),{},{trailers:Object(w.a)(t.trailers.map((function(e){return e.url})).filter((function(e){return e.includes("https://www.youtube.com/watch?v=")||e.includes("https://youtu.be/")})).map((function(e){return e.includes("https://www.youtube.com/watch?v=")?e.replace("https://www.youtube.com/watch?v=","https://www.youtube.com/embed/"):e.replace("https://youtu.be/","https://www.youtube.com/embed/")})))});default:return e}},K=n(10),R=n(5),Y=n.n(R),B=function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{onClick:function(){e.setActive(!1),e.setModal(null)},className:"".concat(Y.a.modal,"\n    ").concat(e.active?Y.a.active:""),children:Object(d.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:Y.a.modalContent,children:[Object(d.jsxs)("div",{className:Y.a.movieInfo,children:[Object(d.jsx)("img",{src:e.posterUrlPreview,className:Y.a.img}),Object(d.jsxs)("div",{className:Y.a.info,children:[Object(d.jsx)("h2",{children:e.nameRu}),Object(d.jsx)("div",{children:Object(d.jsx)("i",{children:e.slogan})}),Object(d.jsxs)("div",{children:[" ",Object(d.jsx)("span",{children:"\u0416\u0430\u043d\u0440 : "}),e.genres?e.genres.map((function(e){return e.genre})).join():""]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("span",{children:"\u0413\u043e\u0434 : "}),e.year]})]})]}),Object(d.jsx)("div",{className:Y.a.description,children:e.description}),Object(d.jsx)("iframe",{src:e.trailers[0],title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,seamless:!0})]})})})},J=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={active:!1,getMovie:!0,isLoad:!0},e.setActive=function(t){e.setState({active:t})},e.scrollHandler=function(t){t.target.documentElement.scrollHeight-(t.target.documentElement.scrollTop+window.innerHeight)<200&&e.props.currentPage<e.props.totalCount&&!e.state.isLoad&&!e.state.getMovie&&e.setState({getMovie:!0,isLoad:!0},(function(){e.getMovie()}))},e.list=function(){return e.props.movie.map((function(t){return Object(d.jsx)(M,{getMovieModal:e.props.getMovieModal,filmId:t.filmId,active:e.active,setActive:e.setActive,name:t.nameRu,rating:t.rating,genres:t.genres,posterUrl:t.posterUrl},t.filmId)}))},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.scrollHandler),this.getMovie()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.scrollHandler)}},{key:"getMovie",value:function(){var e=this;this.state.isLoad&&this.state.getMovie&&(this.setState({isLoad:!0}),this.props.getMovie(this.props.currentPage,this.props.movie,(function(){e.setState({getMovie:!1,isLoad:!1})})))}},{key:"render",value:function(){return console.log(this.props.trailers),Object(d.jsx)("div",{className:g.a.content,children:Object(d.jsxs)("div",{className:g.a.container,children:[this.state.active&&Object(d.jsx)(B,Object(p.a)(Object(p.a)({},this.props.modal),{},{trailers:this.props.trailers,setModal:this.props.setModal,active:this.state.active,setActive:this.setActive})),this.list()]})})}}]),n}(o.a.Component),q=Object(K.b)((function(e){return{movie:e.movie.movie,modal:e.movie.modal,trailers:e.movie.trailers,totalCount:e.movie.totalCount,currentPage:e.movie.currentPage}}),{getMovie:function(e,t,n){return function(){var a=Object(C.a)(N.a.mark((function a(o){var i;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.length<=20*e)){a.next=5;break}return a.next=3,A(e);case 3:i=a.sent,o(D(i.data.films,i.data.pagesCount,n));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},getMovieModal:function(e){return function(){var t=Object(C.a)(N.a.mark((function t(n){var a,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return a=t.sent,t.next=5,L(e);case 5:o=t.sent,n(F(null)),n(F(a.data.data)),n((i=o.data.trailers,{type:H,trailers:i}));case 9:case"end":return t.stop()}var i}),t)})));return function(e){return t.apply(this,arguments)}}()},setModal:F})(J);var Q=function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(m,{}),Object(d.jsx)(q,{})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),i(e),c(e)}))},W=n(12),Z=n(29),z=Object(W.b)({movie:X}),G=Object(W.c)(z,Object(W.a)(Z.a));c.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(K.a,{store:G,children:Object(d.jsx)(Q,{})})}),document.getElementById("root")),V()}},[[62,1,2]]]);
//# sourceMappingURL=main.fbb367ee.chunk.js.map